<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="$lang$" xml:lang="$lang$"$if(dir)$ dir="$dir$"$endif$>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Pandoc-CV</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <!-- https://jsfiddle.net/kmq736ut/ -->
  <style>
    .A4 {
      background: white;
      width: 21cm;
      height: 29.7cm;
      display: block;
      padding: 2cm;
      margin: 0.5cm auto;
      box-shadow: 0 0 0.5cm rgba(0, 0, 0, 0.5);
      overflow: hidden;
      box-sizing: border-box;
      font-size: 12pt !important;
    }

    @page {
      size: A4;
      margin: 0;

    }

    @media print {
      .page-break {
          display: block;
          page-break-before: always;
      }

      body {
          margin: 0;
          padding: 0;
      }

      .A4 {
          box-shadow: none;
          margin: 0;
          width: auto;
          height: auto;
      }

      #data, .noprint {
          display: none;
      }

      .enable-print {
          display: block;
      }
    }

    h1, h2 {
      text-align: center;
      margin: 3mm;
    }

    #info > ul {
      list-style: none;
      display: flex;
      align-items: center;
      justify-content: space-around;
      flex-wrap: wrap;
      width: 100%;
      padding: 0;
      gap: 0.75mm
    }

    #info > ul > li {
      display: inline;
      flex-basis: fit-content;
    }

    p, ul {
      margin: 2mm 0;
    }

    h3 {
      font-size: 1.5em;
      margin: 3mm 0;
      padding-bottom: 1mm;
      padding-left: 1mm;
      padding-right: 3mm;
      width: fit-content;
      border-bottom: #1a1a1a solid 0.75mm;
    }

    p {
      text-indent: 14pt;
      margin-left: 14pt;
      text-align: justify;
      text-justify: inter-word;
    }

    h4 {
      font-size: 1.1em;
      margin-top: 2mm;
      margin-bottom: 1.5mm;
    }

    h5, h6 {
      font-size: 1em;
      display: inline;
      margin: 0 0 2mm 14pt;
    }

    h5 + h6 {
      display: block;
      float: right;
    }

    h5:has(+ h6) {
      display: block;
      float: left;
    }

    h5 + h5:has(+ h5 + h5):after {
      content: "\A";
      display: block;
      margin-bottom: 3mm;
    }

    h6 + ul {
      display: inline-block;
      width: 100%;
    }

    h6 + ul:before {
      content: "\A";
      display: block;
      margin-top: -2mm;
    }

    #data {
      display: none;
    }
  </style>
  <style>
    $for(style)$
        $style$
    $endfor$
  </style>
$for(css)$
  <link rel="stylesheet" href="$css$" />
$endfor$
$for(header-includes)$
  $header-includes$
$endfor$
</head>
<body>
$for(include-before)$
$include-before$
$endfor$
<input type="button" class="noprint" value="Print / Save PDF" onClick="window.print()" style="position: fixed">
<div id="data">
$body$
</div>
$for(include-after)$
$include-after$
$endfor$
</body>
<footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        $$(document).ready(function () {
            const data = $$("#data")
            function load() {
                let temp_a4 = $$('<div class="A4"></div>')
                data.after(temp_a4)
                let elements = data.children();
                for (let i = 0; i < elements.length; i++) {
                    let new_element = $$(elements[i]).clone()
                    temp_a4.append(new_element)
                    if ($$(new_element).is("ul,ol")) {
                        temp_a4.children().last().remove()
                        let lis = new_element.children()
                        let j = 0
                        tag = $$(new_element).prop("tagName")
                        while (j<lis.length){
                            let new_list = $$(`<$${tag}></$${tag}>`)
                            temp_a4.append(new_list)
                            while (
                                $$(temp_a4)[0].scrollHeight - Math.ceil($$(temp_a4).innerHeight()) <= 0
                                && j < lis.length){
                                new_list.append(lis[j])
                                j++
                            }
                            if (j < lis.length){
                                j--
                                new_list.children().last().remove()
                                let temp_a4_t = $$('<div class="A4"></div>')
                                temp_a4.after(temp_a4_t)
                                temp_a4 = temp_a4_t
                            }
                        }
                    }
                    else if ($$(elements[i]).hasClass("page-break") ||
                        $$(temp_a4)[0].scrollHeight - Math.ceil($$(temp_a4).innerHeight()) > 0
                    ) {
                        let temp_a4_t = $$('<div class="A4"></div>')
                        temp_a4.after(temp_a4_t)
                        temp_a4 = temp_a4_t
                        temp_a4.append(new_element)
                    }
                }
            }

            load()
            data.on('DOMSubtreeModified', function () {
                $$(".A4").remove();
                load()
            })
        });
    </script>
    <script>
    $for(script)$
        $script$
    $endfor$
    </script>
    $for(js)$
      <script src="js"></script>
    $endfor$
</footer>
</html>